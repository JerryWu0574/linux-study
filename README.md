# linux-study
# 1.5Linux

## 1.5.1虚拟机安装

centos镜像国内推荐下载地址
网易镜像：http：//mirrors.163.com/centos
搜狐镜像：http：//mirrors.sohu.com/centos

##   1.5.2Linux文件系统

 Linux文件系统采用层级式的树状文件目录结构，最上层是根目录“/”，然后在此目录下创建其他目录
“\”   转义字符                              “/”   目录层级划分
“/”   根目录
“/home”  普通用户登录桌面目录
“/lib”  系统开机所需要的最基本的动态链接共享库
 “/lost+found”  通常为空，非法关机后会产生文件
“/etc”  所有的系统管理所需要的配置文件和子目录
“/usr”  用户很多自行安装的应用程序和文件都放在这个目录下
“/proc”虚拟文件系统
“/boot”  启动linux 的核心文件
“/sys“文件系统sysfs
"/tmp"  存放临时文件

“/dev”类似于windows设备管理器，把所有硬件用文件形式存储

"/media"   设备识别，如光盘，U盘
"/mnt"  临时挂在其他文件系统，可将外部存储挂载在/mnt

##  1.5.3Linux常用命令

### 1.5.3.1 vi编辑器的使用

编辑模式——>一般模式       esc
一般模式——>编辑模式       i或a
一般模式——>命令模式       :或/
命令模式——>一般模式       esc

vi 文件名          新建文件
：(!)w               (强制)保存文件不退出编辑
：(!)wq             (强制）保存文件并退出编辑

yy：                  拷贝当前行   
2yy：                拷贝当前行向下的两行             多行同理（一般模式下命令）   
p：                    粘贴至光标定位下一行
**P**：                    粘贴至光标定位上一行
set (no)nu：     (取消)标行号 
u：                    撤销上一步操作（undo）
dd：                  删除当前行
5dd：                删除当前光标向下5行               多行同理（一般模式下命令）

：/关键字：      查找关键字

n：                    查找下一个

G(gg)：             光标到当前文件行尾(行首）

:数字：              光标到指定行

### 1.5.3.2文件和目录命令

pwd：                显示工作路径

ls：                    查看当前目录中的信息

ls -a：                查看所有信息，包括普通文件、文件夹和隐藏文件夹

ls -l：                 以详细列表的方式查看，  缩写ll

#### 1.5.3.2.1cd改变文件路径

cd /：                切换到系统的根目录

cd ..:                   退回当前目录的上一级目录

cd ~：                切换到当前目录的home目录

cd 文件夹名：   进入当前目录下的该文件目录



#### 1.5.3.2.2mkdir创建目录（文件夹）

mkdir 文件夹名 ：                          当前目录下创建文件夹

mkdir /root/文件夹名：                 根目录下创建文件夹

#### 1.5.3.2.3递归创建文件夹     

以doc—>os_day2为例

mkdir -p /root/doc/os_day2          在（根目录下）创建os_day2，若没有doc文件夹，则先创建doc文件夹（级联）

#### 1.5.3.2.4rmdir删除目录（文件夹）

rmdir 文件夹名 ：                           删除当前目录下该文件夹

rmdir 指定路径文件夹：                删除指定路径文件夹

#### 1.5.3.2.5touch创建一个新的文件

touch 文件名：                               创建该文件，若存在该文件，则更新该文件属性

#### 1.5.3.2.6cp复制文件

cp a b ：                        把a文件复制当前所在的文件夹并重新命名为b

cp -r ：                          复制整个文件夹

cp a 文件夹名/b：        把a文件夹复制到指定文件夹中并命名为b

\cp day2/a day3/a       强制用day2a的文件覆盖day3a的文件

#### 1.5.3.2.7rm删除文件

rm 文件名：                  删除当前目录下该文件

rm  绝对路径文件名： 删除绝对路径下该文件

rm -f    ：                       强制删除，不进行提示

rm -r   ：                        递归删除文件

#### 1.5.3.2.8mv移动或重命名文件或目录

mv a b：                              将文件a重命名为b

mv day2/atxt day3/b.txt:   把day2中的a。txt文件移动到day3中，顺便改名为b。txt

mv doc/day3 day3 ：         把doc目录里的day3文件夹移动到当前doc所在的目录中

#### 1.5.3.2.9cat查看文件内容

cat 文件名：                          查看该文件的内容

cat -n ：                                 查看该文件内容时，显示行号

cat 文件名 | grep 关键字： 在该文件中抓取关键字

#### 1.5.3.2.10echo输出内容到控制台

echo bbbbb>b.txt ：            把bbbbb写入到b.txt中，如果b.txt不存在，则自动创建b.txt，如果存在，则覆盖其中内容

echo bbbbb>>b.txt：           往b.txt中追加写入bbbbb

#### 1.5.3.2.11head查看某文件的上部分内容（默认查看前10行）

head  文件名：                      把该文件前10行显示

head -n 数字 文件名：          查看该文件前指定行内容

#### 1.5.3.2.12tail查看某文件的下部分内容（默认查看最后10行）

tail 文件名 ：                          查看改文件名最后10行

tail  -n 数字 文件名：             查看该文件最后指定行内容

#### 1.5.3.2.13创建超链接

ln -s 链接目标地址 链接名：  为链接目标地址创建一个超链接

此时使用rm删除的是超链接而非链接指向的文件



（2020.11.15）

## 1.5.4系统命令

### 1.5.4.1Linux关机命令

shutdown  now ：          立刻关机

shutdown -h 时间 ：      指定时间后关机 

shutdown -r now ：      立刻进行重启

halt                         ：      关机

power off              ：      立刻进行关机

reboot                    ：      立刻进行重启

sync                        ：     把内存的数据同步到磁盘中

### 1.5.4.2用户登录和注销

su - 用户名’    ：         系统切换用户     

logout            ：         注销当前用户

### 1.5.4.3用户管理

Linux是一个多用户多任务的操作系统，任何一个要使用系统资源的用户，都必须首先向系统管理员申请一个账号，然后以这个账号的身份进入系统 

#### 1.5.4.3.1添加用户

useradd 用户名  ：    在/home目录中创建用户目录  

#### 1.5.4.3.2密码管理

passwd 用户      ：      修改该用户的登录密码，需在root权限下操作

#### 1.5.4.3.3切换用户

高权限用户切换到低权限用户时无需输入密码，低权限用户切换到高权限用户时需输入密码

#### 1.5.4.3.4查询用户信息

id 用户名            ：      查看该用户的信息	

创建用户时，如果不带其他参数，则系统会自动为该用户创建一个与用户名同名的用户组，因为在Linux系统中，管理用户默认以组进行管理

who am i           ：     查询当前登录系统信息

whoami              :       显示当前操作的用户名

#### 1.5.4.3.5退回到切换前的用户exit

#### 1.5.4.3.6删除用户

userdel -f 用户名：   强制删除用户，即使该用户已经在登录状态

userdel -r 用户名：  删除用户的同时删除与用户相关的所有文件

userdel -fr 用户名： 强制删除用户的同时删除与用户相关的所有文件

### 1.5.4.4用户组管理

#### 1.5.4.4.1增加组

groupadd 组名              ：        增加开发组 

useradd -g 组名 用户名：       在指定组中添加一个用户

#### 1.5.5.4.2删除组

groupdel 组名                 ：     删除指定开发组

#### 1.5.4.4.3修改用户所在组

usermod -g 组名 用户名：    将指定用户移动到指定组中

#### 1.5.4.4.4查看用户和组相关文件

所有用户信息，保存在/etc/passwd中

cat /etc/passwd ：          查看用户文件内容

cat /etc/group   ：          查看用户组文件内容

## 1.5.5压缩和解压缩

1.直接解压会解压到当前操作的目录，会自动替换同名的目录

2.解压时带相对路径，会解压到指定的相对路径中

3.解压时带绝对路径，会解压到指定的绝对路径中

4.以上2.3步在解压前要保证只当的路径存在，如果不存在会解压失败

### 1.5.5.1gzip/gunzip指令

gzip用于压缩文件，gunzip用于解压

基本语法

 gzip 文件名          ：                                                       将指定文件压缩为gz文件

gunzip 文件名.gz ：                                                        将指定压缩文件解压缩

从windows导入文件进入centos

1.filezilla

2.sftp>  Alt+p

### 1.5.5.2zip/unzip

zip压缩文件，unzip用于解压

基本语法

zip （选项）压缩包名.zip 文件名（多个）          ：        将指定文件打包压缩为zip文件

zip （选项）压缩包名.zip a*                                 ：        将文件名为a开头的文件打包压缩为zip文件

zip （选项）压缩包名.zip 指定路径                      ：        将指定路径下文件打包压缩为zip文件

unzip (选项) 压缩包名.zip ：                                 ：         将只当压缩文件解压缩

unzip -d 文件夹名 压缩包名                                  :           将指定压缩包解压缩到指定文件夹

unzip -d 绝对路径 压缩包名                                  ：        将指定压缩包解压缩到指定路径

zip常用选项

-r                                                                              ：        递归压缩，即压缩目

unzip的常用选项

-d                                                                             ：         指定解压后文件的存放目录

### 1.5.5.3tar指令

tar指令是打包指令

选项说明

-c  ：                                               产生.tar打包文件

-v  ：                                               显示详细信息

-f   ：                                               指定备份文件名

-z   ：                                              或-gzip进行压缩

-x   ：                                              解包.tar文件

-C <目的目录> ：                          解包至指定目的目录

![image-20201115155954835](C:\Users\JerryWu\AppData\Roaming\Typora\typora-user-images\image-20201115155954835.png)

tar 选项  包名 文件名（多个）： 将多个文件打包

![image-20201115160111380](C:\Users\JerryWu\AppData\Roaming\Typora\typora-user-images\image-20201115160111380.png)

tar 选项  包名 *                        ：   将当前目录下所有文件、文件夹打包

![image-20201115160244479](C:\Users\JerryWu\AppData\Roaming\Typora\typora-user-images\image-20201115160244479.png)

tar 选项 包名 -C （目的目录）：   将指定包解包至目的目录

## 1.5.6权限管理

一个文件通常包含以下信息：

1.所有者：该文件的所有者的权限信息

2.所在组：该文件在所在组的权限信息

3.其他组：该文件在其他组的权限信息



![](C:\Users\JerryWu\AppData\Roaming\Typora\typora-user-images\image-20201115153147221.png)

 -所有者权限-所在组权限--其他组权限    文件数  所有者        所在组       创建时间           文件名



当前普通用户创建的文件只有他自己拥有读写的权限，其他普通用户只有读的权限

root拥有对所有文件文件夹的所有操作权限

### 1.5.6.1文件所有者修改

chown 用户名 文件名：              将指定文件的所有者修改为指定所有者

### 1.5.6.2修改文件所在组

chgrp 组名 文件名     ：                将指定文件修改到指定组

### 1.5.6.3修改文件访问权限

#### 1.5.6.3.1数字标记法

chmod 权限  文件名                                 ：       对于指定文件，为这类用户修改权限

![image-20201116223246738](C:\Users\JerryWu\AppData\Roaming\Typora\typora-user-images\image-20201116223246738.png)

权限

数字标记法表示的权限模式是4个八进制数，每个数由位权为4、2、1的3个八进制数相加得到。如果对应位的数字被省略掉，则将此位置的数字默认设置为0。数字所代表的权限的含义:0表示没有权限，在第一个八进制数中1表示粘滞位;2表示sgid权限;4表示suid权限，然后将这3个数字相加所得到的数字即为最终权限。

第2～4个八进制数中1表示可执行权限;2表示可写权限;4表示可读权限，然后将这3个数字相加所得到的数字即为最终权限。

第2位数字代表文件所有者(u)的权限。

第3位数字代表文件所属组的用户(g)的权限。

第4位数字代表其他所有用户（o)的权限。

#### 1.5.6.3.2字符标记法

chmod  用户   修改权限符   权限 文件名：      对于指定文件，为这类用户修改权限

![image-20201116221533002](C:\Users\JerryWu\AppData\Roaming\Typora\typora-user-images\image-20201116221533002.png)

用户

u：   user所有者          g：group文件所属组内用户      o：  others用户之外的其他用户    a：所有用户

修改权限符

+： 增加权限                -：减少权限                                 =：不考虑文件原有权限，设置为指定权限

权限

r：read                        w：write                                      x：execute执行权限

X：只有当目标文件对用户是可执行的或该目标文件是目录时才设置X权限

s：表示设置“suid”(set-uid)权限和“sgid”(set-gid)权限，只能和“u”、“g”连用

t：表示“sticky”，即粘附位                                               u：表示将指定类别的权限设置成与文件所有者(user）具有相同的权限                                                    g：表示将指定类别的权限设置成与文件所属工作组（group）具有相同的权限                                       o：表示将指定类别的权限设置成与其他用户(others）具有相同的权限

##### linux下安装jdk步骤

1.上传安装包到服务器上的根目录

2.解压缩jdk安装包到/usr/local/java

​    mkdir /usr/local/java

​    tar -zxvf jdk-8u192-linux-x64.tar.gz -C mkdir /usr/local/java

3.观察解压后的目录

   /usr/local/java/jdk1.8.0_192中

4.备份系统配置文件/etc/profile

   cp profile profile.bak

5.添加jdk的配置信息：c

#set java environment
JAVA_HOME=/usr/local/java/jdk1.8.0_192
CLASSPATH=.:$JAVA_HOME/lib.tools.jar
PATH=$JAVA_HOME/bin:$PATH
export JAVA_HOME CLASSPATH PATH

6.刷新配置文件让新的文件生效

source /etc/profile

7.查看jdk版本：
java -version
如果出现一下类似信息,说明安装配置成功：
java version "1.8.0_192"
Java(TM) SE Runtime Environment (build 1.8.0_192-b12)
Java HotSpot(TM) 64-Bit Server VM (build 25.192-b12, mixed mode)

##### windows下安装jdk步骤

JAVA_HOME
C:\Java\jdk1.8.0_112

Path
%JAVA_HOME%\bin
%JAVA_HOME%\jre\bin

CLASSPATH
.;%JAVA_HOME%\lib\dt.jar;%JAVA_HOME%\lib\tools.jar;









# os-day-4

### 权限信息介绍

0位：文件类型

1-3位：所有者权限

4-6位：所在组权限

7-9位：其他组权限

r(可读)：作用于文件为可读权限，作用于文件夹为可读取目录内容

w(可读)：表示目录内可以创建、删除修改文件和文件夹

x（可执行）：用于文件夹上，表示该文件夹是否可以被进入

#### 数字标记法：

对于指定文件，为这类用户修改权限

```
chmod 权限  文件名
```

| 4    | 2    | 1    |
| ---- | ---- | ---- |
| r    | w    | x    |

然后将这3个数字相加所得到的数字即为最终权限

示例：

```
chmod 344 文件名：设置指定文件的写和执行的权限

chmod 544 文件名：设置只当文件的读和执行的权限

chmod 644 文件名：设置指定文件的读和写的权限

chmod 744 文件名：回复当前用户的所有权限
```



#### 字符标记法

chmod  用户   修改权限符   权限 文件名：      对于指定文件，为这类用户修改权限

用户

u：   user所有者          g：group文件所属组内用户      o：  others用户之外的其他用户    a：所有用户

修改权限符

+： 增加权限                -：减少权限                                 =：不考虑文件原有权限，设置为指定权限

权限

r：read                        w：write                                      x：execute执行权限

修改权限符

+： 增加权限                -：减少权限                                 =：不考虑文件原有权限，设置为指定权限

权限

r：read                        w：write                                      x：execute执行权限

# shell

## 为什么要学习shell

Linux运维工程师：在进行服务器集群管理时，需要编写sehll程序来进行服务器管理

java或python程序员：工作的需要，编写一些脚本进行程序或者服务器的维护，比如编写一个定时备份数据库的脚本

大数据程序员：需要编写shell程序来管理集群

## 什么是shell

命令行解释器，为用户提供一个Linux内核发送请求，以便运行程序的界面系统级程序，用户可以用shell来启动、挂起、停止，甚至时编写一些程序。

## shell脚本

是一种为shell 编写的脚本程序

编写要求:

脚本以#！/bin/bash开头

脚本需要有可执行权限



执行脚本文件：

```
文件绝对路径
```

```
sh 脚本文件
```

## bash手册

man命令用来访问存储在Linux系统上的手册页面。

bash手册并不是按部就班的学习指南，而是作为快速参考来使用的。

当使用man命令查看手册页的时候，这些手册页是由分页程序（pager）来显示的。分分页程序是一种实用工具，能够逐页显示文本。通过空格键来进行翻页，回车键逐行查看，q建退出。

```shell
man 工具名
例：man vim
```

​                     Linux手册页惯用的节名

| 节          | 描述                       |
| ----------- | -------------------------- |
| Name        | 显示命令名和一段简短的描述 |
| Synopsis    | 命令的语法                 |
| Options     | 命令选项描述               |
| Description | 命令的一般性描述           |



## shell变量

### 为什么需要变量

程序处理数据时，数据是加载到内存的，为了方便找到内存中的数据，通过变量管理的。

### 什么是变量/变量名

程序中 

### 什么是shell变量

Linux shell 编程中使用的变量

shell变量分为系统变量和用户自定义变量

系统变量：$HOME $PWD $USR

### 用户自定义变量

#### 基本语法

定义变量： 变量=值（说明=赋值）

撤销变量：unset 变量

#### 变量定义命名规则

变量名称可以由字母数字和下划线组成，但不能以数字开头

变量名称一般习惯大写

等号两侧不能有空格

把指令结果赋值给变量时，使用''将指令括起来，或使用$()将指令括起来

示例：

```linux
CONTENT='cat hello.sh'

CONTENT=$(cat hello.sh)
```

## 注释

注释是指解释字句的文字

```shell
#单行注释

：<<！
多行注释
多行注释
！
```

## 设置环境变量

环境变量相当于给系统和用户应用程序设置的一些参数。比如path，是告诉系统，当要求系统运行一个应用程序而没有告诉它程序所在的完整路径时，系统除了在当前目录下面寻找此程序外，还应到哪些目录寻找。

### 基本语法

export 变量名=变量值 ：（将shell变量输出为环境变量）

source 配置文件：           （让修改后的配置信息立即生效）

echo $变量名 ：               （查询环境变量的值）

## 位置参数变量

当我们执行一个shell脚本时，如果希望获取到的命行的参数信息，就可以使用da-位置参数变量。

### 基本语法

$n     (n为数字)

$*      (这个变量代表命令行中所有的参数，$*把所有的参数看成一个整体)

$@    （这个变量也代表命令行中所有的参数，不过把$@把每个参数区对待）

$#       （这个变量代表命令行中所有参数的个数）

```
#!/bin/bash
# $0表示拿到当前自身
# $1表示获取第一个位置的参数值
# $2表示获取第二个位置的参数值
10以上的参数需要用大括号包含，如${10}
echo "$0 $1 $2"
```

# 运算符

基本语法：运算时或表达式

```
运算（1+2）*3
1.“$((运算式))“或”$[运算式]”
  示例：#!/bin/bash
    #jisuan (1+2)*3的值
    RESULT=$[(1+2)*3]
    echo $RESULT

2.变量1=`expr m 运算符 n`
  变量2=`expr $变量1 运算符 t`
  示例：#!/bin/bash
    #jisuan (1+2)*3的值
    RESULT=`expr 1 + 2`
    RESULT2=`expr $RESULT \* 3`
    echo $RESULT2
3. #求出命令行的两个参数（整数）的和
    RESULT=$[($1+$2)*$3]
    echo "RESULT:$RESULT"
```

## 流程控制语句

### if语句

语法：

```
if [ 条件表达式 ]       %条件表达式前后要有空格
then
    指令
fi（表示finish的意思）

if [ 条件表达式 ]
then
    指令
elif [ 条件表达式 ]
then
    指令
fi
```

[ 条件表达式 ] 条件表达式前后要有空格

PS：[]非空时，值为true，否则为false

常用判断条件

1.字符串比较 = 

2.两个整数的比较

```
-lt 小于
-le 小于等于
-eq 等于
-gt 大于
-ge 大于等于
-ne 不等于
```

3.按照文件权限进行判断

```
-r   有读的权限
-w   有写的权限
-x   有执行的权限
```

4.按照文件类型进行判断

```
-f   文件存在并且是一个常规的文件
-e   文件存在
-d   文件存在并是一个目录
```

### case语句

case语句用于条件的等值判断

示例：输入参数值为1的时候，输出“星期一 ”， 为2时，输出“星期二”，为3时，输出“星期三”，其他，输出“天天都是星期五”

```
#！/bin/bash

case $1 in
"1")
    echo "星期一"
;;
"2")
    echo "星期二"
;;
"3")
    echo "星期三"
;;
*)
    echo "天天都是星期五"
;;

esac
```



### for循环

基本语法：

```
for 变量 in 值1 值2 值3...
do
指令
done

for((条件判断语句))
do
指令
done
```

示例：

1.打印命令行输入的参数$*|$@

```
#!/bin/bash

for i in $*
do
  echo "当前元素为$i"
done
```

2.输出显示从1加到100的值

```
#!/bin/bash

SUM=0
for((i=1;i<=100;i++))
do
SUM=$[$SUM+$i]
done
echo "sum:$SUM"
```

### while循环

基本语法：

```
while [条件判断语句]
do
指令
done
```

示例：

输出显示从1加到100的值

```
#!/bin/bash
#保存累加结果

SUM=0
I=1
while [ $I -le 100 ]
do
  SUM=$[$I + $SUM]
  I=$[$I+1]
done
echo "sum:$SUM"
```



# docker

## 安装依赖库

```
yum -y install gcc
yum -y install gcc-c++
```

## 安装docker

```
yum install docker
```

## 启动docker

### 启动docker指令

```
systemctl start docker
```

### 开机自启动

```
systemctl enable docker
```

## 使用docker下载镜像image

### 设置docker加速器

1.访问阿里云平台	
